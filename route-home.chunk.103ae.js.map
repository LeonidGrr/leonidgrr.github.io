{"version":3,"sources":["webpack:///./components/Explore/Explore.module.css","webpack:///./routes/home/index.tsx","webpack:///./components/Header/index.tsx","webpack:///./components/Header/Header.module.css","webpack:///./components/Explore/index.tsx"],"names":["titleMap","name","header","sub","about","desc","screen","windows","Home","loader","useContext","Context3D","Header","props","className","css","Explore","useState","showContent","setShowContent","showDescription","setShowDescription","useEffect","updateState","m","data","split","window","addEventListener","removeEventListener","contentRef","useRef","handleCamera","e","stopPropagation","key","currentTarget","dataset","postMessage","current","offsetWidth","document","body","clientWidth","handleHideDescription","useCallback","explore","type","onClick","prev","ref","classNames","content","contentShow","scenes","Object","keys","map","onPointerDown","links","href","description","descriptionShow","dangerouslySetInnerHTML","__html","title","closeButton"],"mappings":"yFACe,KAAC,QAAU,iBAAiB,kBAAoB,2BAA2B,oBAAoB,2BAA2B,gBAAkB,yBAAyB,QAAU,iBAAiB,YAAc,qBAAqB,OAAS,gBAAgB,YAAc,qBAAqB,gBAAkB,yBAAyB,YAAc,uB,kCCCvW,yEAcMA,EAAmB,CACrBC,KAAM,cACNC,OAAQ,cACRC,IAAK,CACPC,MAAO,CACNH,KAAM,QACNI,KAAM,mKAEDC,OAAQ,CACbL,KAAM,iCACNI,KAAM,+DAEDE,QAAS,CACdN,KAAM,mBACNI,KAAM,iNAmBMG,UAdgC,WAC9C,IAAQC,EAAWC,YAAWC,KAAtBF,OAER,OACC,SACC,EAAC,IAAD,CAAQP,OAAQF,EAASE,SACzB,EAAC,IAAD,CACCF,SAAUA,IAEVS,K,8EC5CJ,4BAeeG,IATA,SAACC,GAEZ,OACI,YAAQC,UAAWC,IAAIb,QACnB,YAHWW,EAAXX,Y,wDCNG,KAAC,OAAS,gBAAgB,kBAAoB,2BAA2B,gBAAkB,2B,kjCCsH3Fc,IAzGC,SAACH,GACb,IACIb,EACAa,EADAb,SAEJ,IAAsCiB,aAAS,GAA/C,GAAOC,EAAP,KAAoBC,EAApB,KACA,IAA8CF,YAAwBjB,EAASG,IAAIC,MAAMC,MAAzF,GAAOe,EAAP,KAAwBC,EAAxB,KAEAC,aAAU,WACN,IAAMC,EAAc,SAACC,GACjB,IAC4C,EADxCC,EAAOD,EAAEC,KAAKC,MAAM,KACR,6BAAZD,EAAK,IACLJ,EAAkB,UAACrB,EAASG,IAAIsB,EAAK,WAAnB,aAAC,EAAuBpB,OAMlD,OAFAsB,OAAOC,iBAAiB,UAAWL,GAE5B,WACHI,OAAOE,oBAAoB,UAAWN,MAE3C,IAEH,IAAMO,EAAaC,YAA8B,MAQ3CC,EAAe,SAACC,GAClBA,EAAEC,kBACF,IACoC,EAD5BC,EAAQF,EAAEG,cAAcC,QAAxBF,IACJA,GAAOf,IAAoBe,IAC3BG,YAAY,0BAAD,OAA2BH,IACtCd,EAAkB,UAACrB,EAASG,IAAIgC,UAAd,aAAC,EAAmB9B,MAXtCyB,EAAWS,SACJT,EAAWS,QAAQC,aAAeC,SAASC,KAAKC,YAAc,GAYjExB,GAAe,KAWrByB,EAAwBC,aAAY,WACtCxB,EAAmB,QACpB,IAEH,OACI,SACI,SACI,aAAW,eACXP,UAAWC,IAAI+B,SAEf,SAAKhC,UAAWC,IAAI,uBACpB,YAAQgC,KAAK,SAASC,QAjBR,WACtB7B,GAAe,SAAA8B,GAAI,OAAKA,OAgBhB,YAIJ,SACI,aAAW,mBACXC,IAAKpB,EACLhB,UAAWqC,IAAWpC,IAAIqC,QAASlC,GAAeH,IAAIsC,cAEtD,QAAIvC,UAAWC,IAAIuC,QACdC,OAAOC,KAAKxD,EAASG,KAAKsD,KAAI,SAACtB,GAAD,OAC3B,QAAIA,IAAKA,GACL,YACI,WAAUA,EACVY,KAAK,SACLW,cAAe1B,GAEdhC,EAASG,IAAIgC,GAAKlC,UAK/B,QAAIa,UAAWC,IAAI4C,OACf,YACIZ,KAAK,SACLW,cAtCJ,cAoCA,UAQJ,QAAI5C,UAAWC,IAAI4C,OACf,OAAGC,KAAK,oDAAR,aAMZ,SAAK9C,UAAWqC,IAAWpC,IAAI8C,YAAazC,GAAmBL,IAAI+C,kBAC/D,UAAM,aAAW,cAAcC,wBAAyB,CAAEC,OAAQ5C,GAAmB,MACrF,YAAQ6C,MAAM,QAAQnD,UAAWC,IAAImD,YAAalB,QAASJ,GAA3D,U","file":"route-home.chunk.103ae.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"explore\":\"explore__sC0To\",\"opacity_animation\":\"opacity_animation__cfcuz\",\"explore-separator\":\"explore-separator__YKfQ6\",\"width_animation\":\"width_animation__HFgqT\",\"content\":\"content__riTMf\",\"description\":\"description__rbxxy\",\"scenes\":\"scenes__zIShF\",\"contentShow\":\"contentShow__ddXxi\",\"descriptionShow\":\"descriptionShow__28FTC\",\"closeButton\":\"closeButton__nPq+M\"};","import { FunctionComponent } from 'preact';\nimport { RoutableProps } from 'preact-router';\nimport { useContext } from 'preact/hooks';\nimport { Context3D } from '../../components/Context3D';\nimport Explore from '../../components/Explore';\nimport Header from '../../components/Header';\n\nexport type Config = {\n    name: string\n    header: string\n    sub: Record<string, {\n\t\tname: string\n\t\tdesc: string\n\t}>\n};\n\nconst titleMap: Config = {\n    name: 'My dev lair',\n    header: 'my dev lair',\n    sub: {\n\t\tabout: {\n\t\t\tname: 'About',\n\t\t\tdesc: `Hello! My name is Leonid. I am just humble programmer trying to learn something in a spare time.\\n This is little demo page. Feel free to tap and click around.`,\n\t\t},\n        screen: {\n\t\t\tname: 'Screen - ThreeJS render target',\n\t\t\tdesc: 'For now this is just an example of THREEJS render target...',\n\t\t},\n        windows: {\n\t\t\tname: 'Raindrops shader',\n\t\t\tdesc: 'I like rain.\\n To program this raindrops I used ThreeJS ShaderMaterial and custom fragment shader, partially based on <a href=\"https://www.shadertoy.com/view/ltffzl\">beautiful shadertoy by Heartfelt</a>.',\n\t\t},\n    },\n};\n\nconst Home: FunctionComponent<RoutableProps> = () => {\n\tconst { loader } = useContext(Context3D);\n\n\treturn (\n\t\t<>\n\t\t\t<Header header={titleMap.header} />\n\t\t\t<Explore\n\t\t\t\ttitleMap={titleMap}\n\t\t\t/>\n\t\t\t{loader}\n\t\t</>\n\t);\n};\n\nexport default Home;\n","import css from './Header.module.css';\n\ntype HeaderProps = {\n    header: string,\n};\n\nconst Header = (props: HeaderProps) => {\n    const { header } = props;\n    return (\n        <header className={css.header}>\n            <h1>{header}</h1>\n        </header>\n    );\n};\n\nexport default Header;","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"header__pBWgD\",\"opacity_animation\":\"opacity_animation__piEyb\",\"width_animation\":\"width_animation__rwi1z\"};","import {\n    useState,\n    useEffect,\n    useRef,\n    useCallback,\n} from 'preact/hooks';\nimport classNames from 'classnames';\nimport css from './Explore.module.css';\nimport { Config } from 'src/routes/home';\n\ntype ExplorePanelProps = {\n    titleMap: Config,\n}\n\nconst Explore = (props: ExplorePanelProps) => {\n    const {\n        titleMap,\n    } = props;\n    const [showContent, setShowContent] = useState(false);\n    const [showDescription, setShowDescription] = useState<string | null>(titleMap.sub.about.desc);\n\n    useEffect(() => {\n        const updateState = (m: MessageEvent<string>) => {\n            let data = m.data.split(':');\n            if (data[0] === 'change_camera_from_webgl') {\n                setShowDescription(titleMap.sub[data[1]]?.desc);\n            }\n        };\n    \n        window.addEventListener('message', updateState);\n\n        return () => {\n            window.removeEventListener('message', updateState);\n        };\n    }, []);\n\n    const contentRef = useRef<null | HTMLDivElement>(null);\n    const isSmallScreen = () => {\n        if (contentRef.current) {\n            return contentRef.current.offsetWidth >= document.body.clientWidth / 2;\n        }\n        return false;\n    };\n\n    const handleCamera = (e: any) => {\n        e.stopPropagation();\n        const { key } = e.currentTarget.dataset;\n        if (key && showDescription !== key) {\n            postMessage(`change_camera_from_dom:${key}`);\n            setShowDescription(titleMap.sub[key]?.desc);\n            if (isSmallScreen()) {\n                setShowContent(false);\n            }\n        }\n    };\n\n    const handleShowContent = (e: Event) => {\n        setShowContent(prev => !prev);\n    };\n\n    const handleDebug = () => {};\n\n    const handleHideDescription = useCallback((e: Event) => {\n        setShowDescription(null);\n    }, []);\n\n    return (\n        <>\n            <div\n                aria-label=\"Explore more\"\n                className={css.explore}\n            >\n                <div className={css['explore-separator']} />\n                <button type=\"button\" onClick={handleShowContent}>\n                    Explore\n                </button>\n            </div>\n            <div\n                aria-label=\"Table of content\"\n                ref={contentRef}\n                className={classNames(css.content, showContent && css.contentShow)}\n            >\n                <ul className={css.scenes}>\n                    {Object.keys(titleMap.sub).map((key: string) => (\n                        <li key={key}>\n                            <button\n                                data-key={key}\n                                type=\"button\"\n                                onPointerDown={handleCamera}\n                            >\n                                {titleMap.sub[key].name}\n                            </button>\n                        </li>\n                    ))}\n                    \n                    <li className={css.links}>\n                        <button\n                            type=\"button\"\n                            onPointerDown={handleDebug}\n                        >\n                            Debug\n                        </button>\n                    </li>\n\n                    <li className={css.links}>\n                        <a href=\"https://github.com/LeonidGrr/leonidgrr.github.io\">\n                            GitHub\n                        </a>\n                    </li>\n                </ul>\n            </div>\n            <div className={classNames(css.description, showDescription && css.descriptionShow)} > \n                <span aria-label=\"Description\" dangerouslySetInnerHTML={{ __html: showDescription || '' }} />\n                <button title=\"Close\" className={css.closeButton} onClick={handleHideDescription}>&#10799;</button>\n            </div>\n        </>\n    );\n};\n\nexport default Explore;"],"sourceRoot":""}